---
import tabsScript from '../scripts/tabs.js?url';

interface TabItem {
  label: string;
  content: unknown;
}

interface Props {
  tabs: TabItem[];
}

const { tabs = [] } = Astro.props as { tabs: TabItem[] };
const uid = `tabs-${Math.random().toString(36).slice(2, 7)}`;
---

<div class="docs-tabs" data-tabs>
  <div class="tabs-boxed tabs" role="tablist" aria-label="Code examples">
    {
      tabs.map((tab, index) => {
        const buttonId = `${uid}-tab-${index}`;
        const panelId = `${uid}-panel-${index}`;
        return (
          <button
            id={buttonId}
            type="button"
            class={`tab ${index === 0 ? 'tab-active' : ''}`}
            data-tabs-trigger
            data-tabs-index={index}
            role="tab"
            aria-selected={index === 0 ? 'true' : 'false'}
            aria-controls={panelId}
            tabindex={index === 0 ? 0 : -1}
          >
            {tab.label}
          </button>
        );
      })
    }
  </div>
  <div class="tabs-panels">
    {
      tabs.map((tab, index) => {
        const panelId = `${uid}-panel-${index}`;
        const buttonId = `${uid}-tab-${index}`;
        return (
          <div
            id={panelId}
            class={`tabs-panel ${index === 0 ? 'is-active' : ''}`}
            role="tabpanel"
            aria-labelledby={buttonId}
            tabindex={0}
            data-tabs-panel
            hidden={index !== 0}
          >
            {tab.content}
          </div>
        );
      })
    }
  </div>
</div>

<script type="module" src={tabsScript} />

<style>
  .tabs-panels {
    margin-top: 1rem;
  }

  .tabs-panel {
    display: none;
    border: 1px solid rgba(255, 255, 255, 0.08);
    border-radius: 1rem;
    padding: 1rem;
    background: rgba(255, 255, 255, 0.02);
  }

  .tabs-panel.is-active {
    display: block;
  }
</style>
