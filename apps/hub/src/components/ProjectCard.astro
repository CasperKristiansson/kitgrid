---
import type { ProjectMeta } from '../data/projects';

interface Props {
  project: ProjectMeta;
}

const { project } = Astro.props;
const docsHref = project.docsUrl ?? `https://${project.subdomain}.kitgrid.dev`;
const isLive = project.status === 'live';
const linkDisabled = !isLive && !project.docsUrl;
const targetHref = linkDisabled ? '#' : docsHref;
---

<article
  class="card border-base-200 bg-base-200/40 h-full border shadow-xl"
  aria-labelledby={`project-${project.id}`}
>
  <div class="card-body gap-4">
    <header class="flex items-center justify-between gap-3">
      <span
        class="badge badge-outline badge-sm text-[0.55rem] tracking-[0.4em] uppercase"
      >
        {project.tag}
      </span>
      <p class="text-base-content/60 text-sm">{project.repo}</p>
    </header>

    <div class="space-y-2">
      <h3 id={`project-${project.id}`} class="text-xl font-semibold">
        {project.name}
      </h3>
      <p class="text-base-content/70 text-sm leading-relaxed">{project.description}</p>
    </div>

    <footer class="mt-2">
      <a
        class={`link link-hover font-semibold ${linkDisabled ? 'opacity-50 pointer-events-none' : ''}`}
        href={targetHref}
        aria-disabled={linkDisabled ? 'true' : undefined}
        target={linkDisabled ? undefined : '_blank'}
        rel={linkDisabled ? undefined : 'noreferrer'}
      >
        Visit docs â†—
      </a>
    </footer>
  </div>
</article>
