---
import type { ProjectMeta } from '../data/projects';

interface Props {
  project: ProjectMeta;
}

const { project } = Astro.props;
const statusLabel: Record<ProjectMeta['status'], string> = {
  live: 'Live',
  'in-progress': 'In progress',
  design: 'Design',
};
const subdomain = `https://${project.id}.kitgrid.dev`;
const isLive = project.status === 'live';
---

<article
  class="card border-base-200 bg-base-200/40 h-full border shadow-xl"
  aria-labelledby={`project-${project.id}`}
>
  <div class="card-body gap-4">
    <header class="flex items-center justify-between gap-3">
      <span
        class={`badge badge-outline uppercase tracking-widest text-xs status--${project.status}`}
      >
        {statusLabel[project.status]}
      </span>
      <p class="text-base-content/60 text-sm">{project.repo}</p>
    </header>

    <div class="space-y-2">
      <h3 id={`project-${project.id}`} class="text-xl font-semibold">
        {project.name}
      </h3>
      <p class="text-base-content/70 text-sm leading-relaxed">{project.description}</p>
    </div>

    <footer class="mt-2">
      <a
        class={`link link-hover font-semibold ${!isLive ? 'opacity-50 pointer-events-none' : ''}`}
        href={isLive ? subdomain : (project.docsUrl ?? '#')}
        aria-disabled={!isLive ? 'true' : undefined}
        target="_blank"
        rel="noreferrer"
      >
        Visit docs â†—
      </a>
    </footer>
  </div>
</article>
