---
import BaseLayout from '../layouts/BaseLayout.astro';
import ProjectCard from '../components/ProjectCard.astro';
import ThemePicker from '../components/ThemePicker.astro';
import { featuredProjects } from '../data/projects';
import { SITE } from '../config/site';

const docsLinks = [
  {
    title: 'Manifest contract',
    description: 'How each repo declares metadata, theme tokens, and refs.',
    href: 'https://pydantic-fixturegen.kitgrid.dev/docs/configuration/',
  },
  {
    title: 'Build + deploy pipeline',
    description: 'Branch/tag dispatch triggers Astro builds + S3 syncs.',
    href: 'https://pydantic-fixturegen.kitgrid.dev/docs/install/',
  },
  {
    title: 'Content guardrails',
    description: 'MDX linting, HTML sanitizers, and docs QA policies.',
    href: 'https://pydantic-fixturegen.kitgrid.dev/docs/security/',
  },
];

const highlights = [
  { label: 'Owned projects', value: 'All mine', helper: 'no external tenants' },
  { label: 'Docs online in', value: '<10 min', helper: 'tag → subdomain' },
  { label: 'Ingress', value: 'Pull-only', helper: 'never pushes to repos' },
];

const flowSteps = [
  {
    title: '01 · Track repo health',
    detail:
      'A lightweight manifest in each repo lists docs source, theme, and ref strategy.',
  },
  {
    title: '02 · Fetch + build',
    detail:
      'Kitgrid pulls docs tarballs, runs Astro + daisyUI layouts, and runs link checks.',
  },
  {
    title: '03 · Publish + pin',
    detail:
      'Artifacts land in /sites/<project>/<ref> with “current” pointers for CloudFront.',
  },
];
---

<BaseLayout>
  <div class="mx-auto flex w-full max-w-6xl flex-col gap-16 px-4 py-12">
    <section
      class="hero reveal border-base-200 from-base-200/40 via-base-200/10 min-h-[480px] rounded-[30px] border bg-gradient-to-br to-transparent"
    >
      <div class="hero-content flex-col items-start gap-10 text-left">
        <div class="space-y-6">
          <span class="pill">Private docs network</span>
          <div class="space-y-4">
            <h1 class="text-4xl leading-tight font-bold md:text-5xl">
              My documentation hub.<br />Every project, one home.
            </h1>
            <p class="text-base-content/70 text-lg">
              Kitgrid isn’t a public SaaS—it’s the private infrastructure I use to ship
              docs for the software I build. Each repo keeps its own source; this site
              orchestrates the pulls, builds, and deploys so <strong
                >&lt;project&gt;.kitgrid.dev</strong
              > is always the canonical destination.
            </p>
          </div>
          <div class="flex flex-wrap gap-3">
            <a class="btn btn-primary cta-shimmer" href="#projects">Browse projects</a>
            <a class="btn btn-secondary" href="#docs">Docs quick links</a>
          </div>
          <div class="flex flex-wrap gap-6">
            <ThemePicker />
          </div>
        </div>

        <div
          class="border-base-200 bg-base-100 grid w-full gap-4 rounded-2xl border p-6 md:grid-cols-3"
        >
          {
            highlights.map((item) => (
              <div class="space-y-1" aria-label={item.label}>
                <p class="text-base-content/60 text-sm tracking-[0.4em] uppercase">
                  {item.label}
                </p>
                <p class="text-3xl font-semibold">{item.value}</p>
                <p class="text-base-content/60 text-sm">{item.helper}</p>
              </div>
            ))
          }
        </div>
      </div>
    </section>

    <section class="reveal-delay grid gap-6 md:grid-cols-2">
      <div class="space-y-3">
        <p class="pill">Looks right everywhere</p>
        <h2 class="text-3xl font-semibold">Responsive shells + device previews.</h2>
        <p class="text-base-content/70 leading-relaxed">
          All layouts rely on daisyUI primitives (hero, cards, mockups) so they respond
          cleanly from phone to desktop. Each docs deploy inherits the same grid +
          typography system, making upgrades dead simple.
        </p>
        <ul class="text-base-content/70 space-y-2">
          <li class="flex items-center gap-2">
            <span class="badge badge-primary badge-sm"></span> Mobile-first navigation &amp;
            sticky TOCs.
          </li>
          <li class="flex items-center gap-2">
            <span class="badge badge-primary badge-sm"></span> Dark-first color tokens with
            high contrast.
          </li>
          <li class="flex items-center gap-2">
            <span class="badge badge-primary badge-sm"></span> Mock device frames for marketing
            previews.
          </li>
        </ul>
      </div>
      <div class="mockup-window border-base-200 bg-base-100 border">
        <div class="bg-base-300 px-8 py-6">
          <div class="space-y-2">
            <p class="text-base-content/60 text-sm">kitgrid.dev → mobile</p>
            <div class="border-base-200 bg-base-100 rounded-2xl border p-4">
              <p class="text-base-content/60 text-xs tracking-[0.5em] uppercase">Hero</p>
              <p class="text-lg font-semibold">
                Docs deploys trigger automatically when I tag a release.
              </p>
              <p class="text-base-content/70 text-sm">
                Tailwind + daisyUI handles the typography and spacing, so I focus on
                content instead of CSS resets.
              </p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="reveal border-base-200 bg-base-200/20 rounded-[28px] border p-8">
      <div class="flex flex-col gap-6 lg:flex-row lg:gap-10">
        <div class="space-y-3 lg:w-1/2">
          <p class="pill">How Kitgrid operates</p>
          <h2 class="text-3xl font-semibold">Pull-only, immutable deploys.</h2>
          <p class="text-base-content/70">
            Every project repo stays the source of truth. Kitgrid only pulls tarballs,
            builds locally, and publishes to CloudFront with a predictable folder
            strategy—no webhooks pushing into your git history.
          </p>
        </div>
        <div class="relative w-full lg:w-1/2">
          <div class="bg-base-200 absolute top-0 bottom-0 left-4 w-[2px]"></div>
          <div class="flex flex-col gap-8 pl-10">
            {
              flowSteps.map((step) => (
                <div class="relative">
                  <div class="bg-primary absolute top-2 -left-[7px] h-3 w-3 rounded-full" />
                  <div class="border-base-200 bg-base-100 rounded-2xl border p-4 shadow-sm">
                    <p class="text-base-content/60 text-center text-sm tracking-[0.3em] uppercase md:text-left">
                      {step.title}
                    </p>
                    <p class="text-base-content/80 text-center text-sm leading-relaxed md:text-left">
                      {step.detail}
                    </p>
                  </div>
                </div>
              ))
            }
          </div>
        </div>
      </div>
    </section>

    <section id="projects" class="reveal space-y-6">
      <div class="flex flex-col gap-3">
        <p class="pill">Project catalog</p>
        <h2 class="text-3xl font-semibold">
          Every docs site ships with the same toolkit.
        </h2>
        <p class="text-base-content/70 max-w-2xl">
          Docs live in each repo under <code class="badge badge-outline">/docs</code>.
          Kitgrid ingests via manifest metadata and publishes a project subdomain
          instantly.
        </p>
      </div>
      <div class="grid gap-6 md:grid-cols-2 lg:grid-cols-3">
        {featuredProjects.map((project) => <ProjectCard project={project} />)}
      </div>
    </section>

    <section id="docs" class="reveal-delay space-y-6">
      <div class="flex flex-col gap-3">
        <p class="pill">Docs shortcuts</p>
        <h2 class="text-3xl font-semibold">Start with the essentials.</h2>
        <p class="text-base-content/70 max-w-2xl">
          These internal docs walk you through manifests, shared lint kits, and go-live
          requests.
        </p>
      </div>
      <div class="grid gap-5 md:grid-cols-2 lg:grid-cols-3">
        {
          docsLinks.map((doc) => (
            <article class="card border-base-300 bg-base-200/30 border shadow-inner">
              <div class="card-body gap-4">
                <h3 class="text-xl font-semibold">{doc.title}</h3>
                <p class="text-base-content/70 text-sm leading-relaxed">
                  {doc.description}
                </p>
                <div class="card-actions">
                  <a
                    class="btn btn-link text-primary link-underline px-0"
                    href={doc.href}
                    target="_blank"
                    rel="noreferrer"
                  >
                    View guide ↗
                  </a>
                </div>
              </div>
            </article>
          ))
        }
      </div>
    </section>

    <section class="reveal border-base-200 bg-base-200/20 rounded-[24px] border p-8">
      <div class="flex flex-col gap-6 md:flex-row md:items-center md:justify-between">
        <div class="space-y-3">
          <p class="pill">Need something custom?</p>
          <h2 class="text-3xl font-semibold">We’re building everything in the open.</h2>
          <p class="text-base-content/70 max-w-xl">
            Infra, theming, ingestion, and the first partner project are all tracked in
            this repo. Open an issue or ping
            {` ${SITE.contactEmail}`} if you need a new capability.
          </p>
        </div>
        <div class="flex flex-col gap-3 md:items-end">
          <a
            class="btn btn-primary cta-shimmer w-full md:w-auto md:whitespace-nowrap"
            href="https://github.com/CasperKristiansson/kitgrid"
            target="_blank"
            rel="noreferrer"
          >
            View roadmap ↗
          </a>
          <a
            class="btn btn-outline w-full md:w-auto"
            href={`mailto:${SITE.contactEmail}`}
          >
            Email us
          </a>
        </div>
      </div>
    </section>

    <footer class="footer border-base-200 text-base-content/70 border-t pt-6">
      <div class="items-center justify-between gap-4 text-sm">
        <p>
          © {new Date().getFullYear()} Kitgrid. Built with Astro, Tailwind CSS, and daisyUI.
        </p>
        <div class="flex gap-4">
          <a
            class="link-hover"
            href="https://github.com/CasperKristiansson/kitgrid"
            target="_blank"
            rel="noreferrer"
          >
            GitHub
          </a>
          <a class="link-hover" href="#docs">Docs</a>
          <a class="link-hover" href={`mailto:${SITE.contactEmail}`}>Contact</a>
        </div>
      </div>
    </footer>
  </div>
</BaseLayout>
