---
import BaseLayout from '../layouts/BaseLayout.astro';
import ProjectCard from '../components/ProjectCard.astro';
import { featuredProjects } from '../data/projects';
import { SITE } from '../config/site';

const docsLinks = [
  {
    title: 'Add your project',
    description: 'kitgrid.yaml fields, repo dispatch, and ingestion rules.',
    href: 'https://kitgrid.dev/docs/add-your-project',
  },
  {
    title: 'Code style kits',
    description: 'Shared ESLint, Prettier, and tsconfig packages for every repo.',
    href: 'https://kitgrid.dev/docs/code-style',
  },
  {
    title: 'Exception policy',
    description: 'Ask for temporary rule overrides and track expirations.',
    href: 'https://kitgrid.dev/docs/exception-policy',
  },
];

const highlights = [
  { label: 'Single repo', value: 'kitgrid', helper: 'apps · packages · infra' },
  { label: 'Docs online in', value: '<10 min', helper: 'per project deploy' },
  { label: 'Search ready', value: 'Pagefind', helper: 'local + federated' },
];
---

<BaseLayout>
  <div class="mx-auto flex w-full max-w-6xl flex-col gap-16 px-4 py-12">
    <section
      class="hero border-base-200 bg-base-200/20 min-h-[480px] rounded-[30px] border"
    >
      <div class="hero-content flex-col items-start gap-10 text-left">
        <div class="space-y-6">
          <span class="pill">Astro · Tailwind · daisyUI · Terraform</span>
          <div class="space-y-4">
            <h1 class="text-4xl leading-tight font-bold md:text-5xl">
              One hub for every project’s docs.
            </h1>
            <p class="text-base-content/70 text-lg">
              <strong>kitgrid.dev</strong> hosts the landing page and triggers
              <strong>&lt;project&gt;.kitgrid.dev</strong> deploys. We fetch docs from each
              repo, render shared layouts via Astro + MDX, and ship to CloudFront without one-off
              DNS.
            </p>
          </div>
          <div class="flex flex-wrap gap-3">
            <a class="btn btn-primary" href="#projects">Browse projects</a>
            <a class="btn btn-secondary" href="#docs">Docs quick links</a>
          </div>
        </div>

        <div
          class="border-base-200 bg-base-100 grid w-full gap-4 rounded-2xl border p-6 md:grid-cols-3"
        >
          {
            highlights.map((item) => (
              <div class="space-y-1" aria-label={item.label}>
                <p class="text-base-content/60 text-sm tracking-[0.4em] uppercase">
                  {item.label}
                </p>
                <p class="text-3xl font-semibold">{item.value}</p>
                <p class="text-base-content/60 text-sm">{item.helper}</p>
              </div>
            ))
          }
        </div>
      </div>
    </section>

    <section id="projects" class="space-y-6">
      <div class="flex flex-col gap-3">
        <p class="pill">Project catalog</p>
        <h2 class="text-3xl font-semibold">
          Every docs site ships with the same toolkit.
        </h2>
        <p class="text-base-content/70 max-w-2xl">
          Docs live in each repo under <code class="badge badge-outline">/docs</code>.
          Kitgrid ingests via manifest metadata and publishes a project subdomain
          instantly.
        </p>
      </div>
      <div class="grid gap-6 md:grid-cols-2 lg:grid-cols-3">
        {featuredProjects.map((project) => <ProjectCard project={project} />)}
      </div>
    </section>

    <section id="docs" class="space-y-6">
      <div class="flex flex-col gap-3">
        <p class="pill">Docs shortcuts</p>
        <h2 class="text-3xl font-semibold">Start with the essentials.</h2>
        <p class="text-base-content/70 max-w-2xl">
          These internal docs walk you through manifests, shared lint kits, and go-live
          requests.
        </p>
      </div>
      <div class="grid gap-5 md:grid-cols-2 lg:grid-cols-3">
        {
          docsLinks.map((doc) => (
            <article class="card bg-base-200/30 border-base-300 border shadow-inner">
              <div class="card-body gap-4">
                <h3 class="text-xl font-semibold">{doc.title}</h3>
                <p class="text-base-content/70 text-sm leading-relaxed">
                  {doc.description}
                </p>
                <div class="card-actions">
                  <a
                    class="btn btn-link text-primary px-0"
                    href={doc.href}
                    target="_blank"
                    rel="noreferrer"
                  >
                    View guide ↗
                  </a>
                </div>
              </div>
            </article>
          ))
        }
      </div>
    </section>

    <section class="border-base-200 bg-base-200/20 rounded-[24px] border p-8">
      <div class="flex flex-col gap-6 md:flex-row md:items-center md:justify-between">
        <div class="space-y-3">
          <p class="pill">Need something custom?</p>
          <h2 class="text-3xl font-semibold">We’re building everything in the open.</h2>
          <p class="text-base-content/70 max-w-xl">
            Infra, theming, ingestion, and the first partner project are all tracked in
            this repo. Open an issue or ping
            {` ${SITE.contactEmail}`} if you need a new capability.
          </p>
        </div>
        <div class="flex flex-col gap-3 md:items-end">
          <a
            class="btn btn-primary w-full md:w-auto"
            href="https://github.com/CasperKristiansson/kitgrid"
            target="_blank"
            rel="noreferrer"
          >
            View roadmap ↗
          </a>
          <a
            class="btn btn-outline w-full md:w-auto"
            href={`mailto:${SITE.contactEmail}`}
          >
            Email us
          </a>
        </div>
      </div>
    </section>

    <footer class="footer border-base-200 text-base-content/70 border-t pt-6">
      <div class="items-center justify-between gap-4 text-sm">
        <p>
          © {new Date().getFullYear()} Kitgrid. Built with Astro, Tailwind CSS, and daisyUI.
        </p>
        <div class="flex gap-4">
          <a
            class="link-hover"
            href="https://github.com/CasperKristiansson/kitgrid"
            target="_blank"
            rel="noreferrer"
          >
            GitHub
          </a>
          <a class="link-hover" href="#docs">Docs</a>
          <a class="link-hover" href={`mailto:${SITE.contactEmail}`}>Contact</a>
        </div>
      </div>
    </footer>
  </div>
</BaseLayout>
