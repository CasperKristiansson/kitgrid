---
import BaseLayout from '../layouts/BaseLayout.astro';
import ProjectCard from '../components/ProjectCard.astro';
import { featuredProjects } from '../data/projects';
import { SITE } from '../config/site';

const docsLinks = [
  {
    title: 'Add your project',
    description: 'Required files, `kitgrid.yaml`, and the CI trigger to ship your docs.',
    href: 'https://kitgrid.dev/docs/add-your-project',
  },
  {
    title: 'Code style kits',
    description: 'Shared ESLint/Prettier/tsconfig packages consumed by every repo.',
    href: 'https://kitgrid.dev/docs/code-style',
  },
  {
    title: 'Exception policy',
    description: 'Request rule overrides, track expirations, and stay aligned.',
    href: 'https://kitgrid.dev/docs/exception-policy',
  },
];

const highlights = [
  { label: 'Single repo', value: 'kitgrid', helper: 'apps + packages + infra' },
  { label: 'Docs online in', value: '<10 min', helper: 'per project deploy' },
  { label: 'Search ready', value: 'Pagefind', helper: 'local & federated' },
];
---

<BaseLayout>
  <div class="layout">
    <section class="hero">
      <span class="pill">Astro + MDX + Terraform</span>
      <h1>One hub for every project’s docs.</h1>
      <p>
        Ship your landing page and <strong>&lt;project&gt;.kitgrid.dev</strong> subdomains
        from one workspace. Kitgrid fetches docs from each repo, renders shared layouts, and
        deploys to CloudFront — no DNS toil.
      </p>
      <div class="hero__actions">
        <a class="btn btn-primary" href="#projects">Browse projects</a>
        <a class="btn btn-secondary" href="#docs">Docs quick links</a>
      </div>
      <div class="hero__highlights">
        {
          highlights.map((item) => (
            <div class="highlight-card">
              <span class="highlight-value">{item.value}</span>
              <span class="highlight-label">{item.label}</span>
              <span class="highlight-helper">{item.helper}</span>
            </div>
          ))
        }
      </div>
    </section>

    <section id="projects" class="section">
      <div class="section-heading">
        <p class="eyebrow">Project catalog</p>
        <h2 class="section-title">Every docs site shares the same toolkit.</h2>
        <p class="text-muted">
          Kitgrid ingests docs directly from each project repo. These featured projects
          show the upcoming rollout.
        </p>
      </div>
      <div class="grid grid-cols-3">
        {featuredProjects.map((project) => <ProjectCard project={project} />)}
      </div>
    </section>

    <section id="docs" class="section docs-section">
      <div class="section-heading">
        <p class="eyebrow">Docs shortcuts</p>
        <h2 class="section-title">Start with the essentials.</h2>
        <p class="text-muted">
          Bookmark these pages to onboard a new project without leaving your terminal.
        </p>
      </div>
      <div class="grid grid-cols-3">
        {
          docsLinks.map((doc) => (
            <article class="doc-card">
              <h3>{doc.title}</h3>
              <p>{doc.description}</p>
              <a href={doc.href} target="_blank" rel="noreferrer">
                Read guide ↗
              </a>
            </article>
          ))
        }
      </div>
    </section>

    <section class="section cta">
      <div class="cta-card">
        <div>
          <p class="eyebrow">Need something custom?</p>
          <h2>We’re iterating in the open.</h2>
          <p class="text-muted">
            Infra, theming, ingestion, and the first partner project are all tracked in
            this repo. Open an issue or ping {SITE.contactEmail} if you need a new capability.
          </p>
        </div>
        <div class="cta-actions">
          <a
            class="btn btn-primary"
            href="https://github.com/CasperKristiansson/kitgrid"
            target="_blank"
            rel="noreferrer"
          >
            View roadmap ↗
          </a>
          <a class="btn btn-secondary" href={`mailto:${SITE.contactEmail}`}> Email us </a>
        </div>
      </div>
    </section>

    <footer class="footer">
      <p>© {new Date().getFullYear()} Kitgrid. Built with Astro + MDX.</p>
      <div class="footer-links">
        <a
          href="https://github.com/CasperKristiansson/kitgrid"
          target="_blank"
          rel="noreferrer">GitHub</a
        >
        <a href="#docs">Docs</a>
        <a href="mailto:{SITE.contactEmail}">Contact</a>
      </div>
    </footer>
  </div>
</BaseLayout>

<style>
  .layout {
    position: relative;
    padding: 4rem 1.5rem 3rem;
    max-width: 1200px;
    margin: 0 auto;
  }

  .layout::before,
  .layout::after {
    content: '';
    position: absolute;
    width: 480px;
    height: 480px;
    border-radius: 999px;
    filter: blur(120px);
    opacity: 0.45;
    z-index: -1;
  }

  .layout::before {
    background: rgba(96, 165, 250, 0.3);
    top: -120px;
    right: 0;
  }

  .layout::after {
    background: rgba(110, 231, 249, 0.25);
    bottom: 0;
    left: -120px;
  }

  .hero {
    text-align: left;
    padding: 3rem;
    background: linear-gradient(
      135deg,
      rgba(255, 255, 255, 0.03),
      rgba(255, 255, 255, 0.01)
    );
    border: 1px solid var(--color-card-border);
    border-radius: calc(var(--radius-lg) * 1.5);
    margin-bottom: 3rem;
  }

  .hero h1 {
    font-size: clamp(2.4rem, 4vw + 1rem, 4rem);
    margin: 1rem 0;
  }

  .hero p {
    font-size: 1.1rem;
    color: var(--color-muted);
    max-width: 60ch;
  }

  .pill {
    display: inline-flex;
    padding: 0.25rem 0.9rem;
    background: rgba(255, 255, 255, 0.08);
    border-radius: 999px;
    font-size: 0.85rem;
    color: var(--color-muted);
  }

  .hero__actions {
    display: flex;
    gap: 1rem;
    flex-wrap: wrap;
    margin: 2rem 0;
  }

  .hero__highlights {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
    gap: 1rem;
  }

  .highlight-card {
    padding: 1rem;
    border-radius: var(--radius-md);
    border: 1px solid rgba(255, 255, 255, 0.08);
    background: rgba(5, 12, 25, 0.6);
  }

  .highlight-value {
    display: block;
    font-size: 1.5rem;
    font-weight: 600;
  }

  .highlight-label {
    color: var(--color-muted);
    font-size: 0.9rem;
  }

  .highlight-helper {
    color: rgba(230, 235, 242, 0.6);
    font-size: 0.85rem;
  }

  .section {
    margin-bottom: 4rem;
  }

  .section-heading {
    margin-bottom: 2rem;
  }

  .eyebrow {
    text-transform: uppercase;
    letter-spacing: 0.4em;
    font-size: 0.8rem;
    color: var(--color-muted);
  }

  .docs-section .doc-card {
    border: 1px solid var(--color-card-border);
    border-radius: var(--radius-lg);
    padding: 1.5rem;
    background: rgba(255, 255, 255, 0.02);
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }

  .doc-card a {
    color: var(--color-accent);
    font-weight: 600;
  }

  .cta-card {
    border: 1px solid var(--color-card-border);
    border-radius: var(--radius-lg);
    padding: 2rem;
    background: rgba(10, 15, 22, 0.9);
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
  }

  .cta-actions {
    display: flex;
    gap: 1rem;
    flex-wrap: wrap;
  }

  .footer {
    padding: 2rem 0 1rem;
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    border-top: 1px solid rgba(255, 255, 255, 0.05);
  }

  .footer-links {
    display: flex;
    gap: 1.5rem;
    color: var(--color-muted);
  }

  @media (max-width: 768px) {
    .hero {
      padding: 2rem;
    }

    .grid-cols-3 {
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
    }
  }
</style>
